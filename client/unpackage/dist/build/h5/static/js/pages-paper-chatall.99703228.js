(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-paper-chatall"],{"0562":function(t,e,n){"use strict";var r=n("b528"),a=n.n(r);a.a},"3e1d":function(t,e,n){"use strict";n("d3b7"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={getHoroscope:function(t){var e=["摩羯","水瓶","双鱼","白羊","金牛","双子","巨蟹","狮子","处女","天秤","天蝎","射手","摩羯"];t=new Date(t);var n=t.getMonth()+1,r=t.getDate(),a=n-(r-14<"865778999988".charAt(n));return e[a]+"座"},sumAge:function(t){var e=new Date(t.replace(/-/g,"/")),n=new Date,r=n.getTime()-e.getTime(),a=Math.floor(r/864e5),i=r%864e5,s=Math.floor(i/36e5),o=i%36e5,u=(Math.floor(o/6e4),o%6e4);Math.round(u/1e3);return a+"天 "+s+"小时 "},getChatTime:function(t,e){if(t=t.toString().length<13?1e3*t:t,e=e.toString().length<13?1e3*e:e,(parseInt(t)-parseInt(e))/1e3>300)return this.gettime(t)},gettime:function(t){t=t.toString().length<13?1e3*t:t;var e=(new Date).getTime(),n=(e-parseInt(t))/1e3;return n<43200?this.dateFormat(new Date(t),"{A} {t}:{ii}"):n<518400?this.dateFormat(new Date(t),"{Mon}月{DD}日 {A} {t}:{ii}"):this.dateFormat(new Date(t),"{Y}-{MM}-{DD} {A} {t}:{ii}")},parseNumber:function(t){return t<10?"0"+t:t},dateFormat:function(t,e){var n={},r=/\{([^}]+)\}/,a=["1","2","3","4","5","6","7","8","9","10","11","12"];n["Y"]=t.getFullYear(),n["M"]=t.getMonth()+1,n["MM"]=this.parseNumber(n["M"]),n["Mon"]=a[n["M"]-1],n["D"]=t.getDate(),n["DD"]=this.parseNumber(n["D"]),n["h"]=t.getHours(),n["hh"]=this.parseNumber(n["h"]),n["t"]=n["h"]>12?n["h"]-12:n["h"],n["tt"]=this.parseNumber(n["t"]),n["A"]=n["h"]>12?"下午":"上午",n["i"]=t.getMinutes(),n["ii"]=this.parseNumber(n["i"]),n["s"]=t.getSeconds(),n["ss"]=this.parseNumber(n["s"]);while(r.test(e))e=e.replace(r,n[RegExp.$1]);return e},getAgeByBirthday:function(t){var e=new Date(t.replace(/-/g,"/")),n=new Date;return n.getFullYear()-e.getFullYear()-(n.getMonth()<e.getMonth()||n.getMonth()==e.getMonth()&&n.getDate()<e.getDate()?1:0)}};e.default=r},"43a4":function(t,e,n){"use strict";n.r(e);var r=n("72ac"),a=n("b534");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("55fe");var s,o=n("f0c5"),u=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"7978a705",null,!1,r["a"],s);e["default"]=u.exports},"4e29":function(t,e,n){"use strict";var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;n("a196");var a=r(n("c771")),i=r(n("ae4e")),s={components:{ChatList:a.default,BottomInput:i.default},data:function(){return{scrollInto:"",scrollHeight:0,list:[],userInformation:""}},onLoad:function(){var t=this;uni.getSystemInfo({success:function(e){t.scrollHeight=e.windowHeight-uni.upx2px(82)}})},onShow:function(){this.userInformation=uni.getStorageSync("userInformation")},onReady:function(){this.scrollToBottom()},mounted:function(){var t=this;this.ws=new WebSocket("ws://192.168.31.135:9090"),this.ws.onmessage=function(e){var n=JSON.parse(e.data);t.userInformation.user_name!=n.speaker&&t.list.push({userid:1,avatar:"/static/img/header/a.svg",speaker:n.speaker,data:n.message,type:"text",createTime:t.$u.timeFormat(new Date,"yyyy-mm-dd hh:MM:ss")})}},methods:{submit:function(t){var e=this,n={userid:1,avatar:"/static/img/header/a.svg",speaker:this.userInformation.user_name,data:t,type:"text",createTime:this.$u.timeFormat(new Date,"yyyy-mm-dd hh:MM:ss")};this.list.push(n),this.ws.send(JSON.stringify({speaker:this.userInformation.user_name,message:t})),setTimeout((function(){e.scrollToBottom()}),500)},scrollToBottom:function(){var t=this.list.length-1;t<0||(this.scrollInto="chat"+t)}}};e.default=s},"55fe":function(t,e,n){"use strict";var r=n("edd4"),a=n.n(r);a.a},"56ed":function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 引入uView的全局SCSS主题文件 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.chat-list .user-img[data-v-3d85a8e3]{width:%?100?%;height:%?100?%}.chat-list .chat-bubble[data-v-3d85a8e3]{max-width:%?400?%}',""]),t.exports=e},"72ac":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={bottomInput:n("ae4e").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"chat"},[n("v-uni-scroll-view",{staticClass:"chat-scroll",attrs:{"scroll-y":"true","scroll-into-view":t.scrollInto,"scroll-with-animation":!0}},t._l(t.list,(function(e,r){return n("chat-list",{key:r,attrs:{item:e,uid:t.userInformation.user_name,pretime:r>0?t.list[r-1].createTime:0}})})),1),n("bottom-input",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)},i=[]},a426:function(t,e,n){var r=n("24fb");e=r(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 引入uView的全局SCSS主题文件 */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.chat .chat-scroll[data-v-7978a705]{position:absolute;left:0;right:0;top:0;bottom:%?85?%}.chat .bottom-handle[data-v-7978a705]{border-top:%?2?% solid #c8c7cc;position:fixed;left:0;right:0;bottom:0;height:%?85?%;background-color:#fff;display:flex;align-items:center}.chat .bottom-handle .send-btn[data-v-7978a705]{width:%?80?%;text-align:center}',""]),t.exports=e},a787:function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"chat-list"},[t.formatTime?n("v-uni-view",{staticClass:"py-20 flex items-center justify-center text-gray-400"},[t._v(t._s(t.formatTime))]):t._e(),n("v-uni-view",{staticClass:" flex items-center px-20 my-20",class:{"flex-row-reverse":t.item.speaker===t.uid}},[n("v-uni-image",{staticClass:"user-img rounded-full",attrs:{src:t.item.avatar,mode:"aspectFill"}}),n("v-uni-view",{staticClass:"chat-bubble mx-20 p-20 rounded-10 bg-gray-100"},[t._v(t._s(t.item.data))])],1)],1)},i=[]},b528:function(t,e,n){var r=n("56ed");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("4f06").default;a("2362fd27",r,!0,{sourceMap:!1,shadowMode:!1})},b534:function(t,e,n){"use strict";n.r(e);var r=n("4e29"),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},c771:function(t,e,n){"use strict";n.r(e);var r=n("a787"),a=n("dbae");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("0562");var s,o=n("f0c5"),u=Object(o["a"])(a["default"],r["b"],r["c"],!1,null,"3d85a8e3",null,!1,r["a"],s);e["default"]=u.exports},d7ca:function(t,e,n){"use strict";var r=n("4ea4");n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("3e1d")),i={props:{item:Object,pretime:[Number,String],uid:String},data:function(){return{}},onShow:function(){this.uid=uni.getStorageSync("userInformation").user_name},computed:{formatTime:function(){return a.default.getChatTime(new Date(this.item.createTime).getTime(),new Date(this.pretime).getTime())}},methods:{}};e.default=i},dbae:function(t,e,n){"use strict";n.r(e);var r=n("d7ca"),a=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=a.a},edd4:function(t,e,n){var r=n("a426");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("4f06").default;a("930b1f9a",r,!0,{sourceMap:!1,shadowMode:!1})}}]);